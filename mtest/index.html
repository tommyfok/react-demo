<!DOCTYPE html>
<html>
<head>
    <title>心理测试</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="style/main.css">
</head>
<body>
    <section id="mtest"></section>
    <footer>A Mental Test, powered by Tommy.</footer>
</body>
<script src="js/react.js"></script>
<script src="js/JSXTransformer.js"></script>
<script type="text/jsx">
var data = [];

var OptionItem = React.createClass({
  render: function () {
    return (
      <div className={'option-item'} onClick={this.submit}>
        <span className={'you'}>￥{this.props.uMoney}</span>
        <span className={'computer'}>￥{this.props.cMoney}</span>
      </div>
    );
  },
  submit: function () {
    this.props.submit(this.props.index);
  }
});

var Options = React.createClass({
  getInitialState: function () {
      return {data: []};
  },
  componentDidMount: function () {
    this.getData();
  },
  render: function () {
    var itemData = this.state.data;
    return (
      <div className={'options'}>
        <OptionItem uMoney={itemData[1]} cMoney={itemData[1]} submit={this.submit} index={0} />
        <OptionItem uMoney={itemData[3]} cMoney={itemData[0]} submit={this.submit} index={1} />
        <OptionItem uMoney={itemData[0]} cMoney={itemData[3]} submit={this.submit} index={2} />
        <OptionItem uMoney={itemData[2]} cMoney={itemData[2]} submit={this.submit} index={3} />
      </div>
    );
  },
  getData: function () {
    if (this.isMounted()) {
      this.setState({
        data: [
          Math.ceil(Math.random() * 3) + 12,
          Math.ceil(Math.random() * 3) + 8,
          Math.ceil(Math.random() * 3) + 4,
          Math.ceil(Math.random() * 3) + 1
        ]
      });
    }
  },
  submit: function (index) {
    console.log(index);
  }
});

React.render(<Options />, document.getElementById('mtest'));
</script>
</html>
